# CollaBoard 프로젝트 기획서

## 프로젝트 개요

**프로젝트명**: CollaBoard (콜라보드)  
**한 줄 소개**: 아이디어를 실시간으로 공유하고 함께 발전시키는 미니멀리스트 온라인 화이트보드  
**개발 기간**: 2025년 12월

## 핵심 가치 제안

- **실시간 협업**: 여러 사용자가 동시에 작업하고 변경사항이 즉시 반영
- **미니멀리스트 디자인**: 불필요한 기능을 제거하고 핵심 기능에 집중
- **무한 캔버스**: 제한 없는 공간에서 자유롭게 아이디어를 펼칠 수 있음
- **접근성**: 로그인 없이도 익명으로 보드를 볼 수 있음 (공개 보드)

## 타겟 사용자

1. **팀 협업**: 프로젝트 기획, 브레인스토밍, 회의록 작성
2. **개인 사용자**: 아이디어 정리, 메모, 프로젝트 관리
3. **교육**: 온라인 수업, 그룹 과제, 토론

## 주요 기능

### 1. 사용자 인증

#### 1.1 소셜 로그인
- **Google OAuth**: Google 계정으로 간편 로그인
- **이메일/비밀번호**: 전통적인 이메일 기반 인증
- **비밀번호 재설정**: 이메일을 통한 비밀번호 재설정

#### 1.2 익명 사용자 지원
- 로그인 없이도 공개 보드 조회 가능
- 익명 사용자도 커서 추적 및 실시간 협업 참여 가능
- 편집 시도 시 로그인 모달 표시

### 2. 보드 관리

#### 2.1 보드 생성 및 관리
- **보드 생성**: 이름, 설명, 공개/비공개 설정
- **보드 목록**: 대시보드에서 내 보드 목록 조회
- **보드 정렬**: 최신순, 이름순, 즐겨찾기순, 고정순
- **보드 검색**: 이름으로 보드 검색 (향후 기능)

#### 2.2 보드 설정
- **공개/비공개 전환**: 보드 공개 여부 변경
- **보드 이름/설명 편집**: 인라인 편집 지원
- **보드 삭제**: 소유자만 삭제 가능

#### 2.3 보드 초대
- **초대 링크 생성**: 공개 보드에 대한 고유 초대 링크 생성
- **초대 링크 공유**: 클립보드 복사 기능
- **초대 코드**: URL에 포함된 초대 코드로 보드 접근

#### 2.4 보드 선호도
- **즐겨찾기**: 자주 사용하는 보드를 즐겨찾기로 표시
- **고정**: 대시보드 상단에 고정 표시

### 3. 캔버스 기능

#### 3.1 무한 캔버스
- **드래그 패닝**: 마우스 드래그로 캔버스 이동
- **미들 버튼 패닝**: 마우스 휠 버튼으로도 패닝 가능
- **그리드 배경**: 시각적 가이드를 위한 그리드 표시
- **줌 컨트롤**: 줌인/줌아웃 버튼 및 숫자 입력

#### 3.2 미니맵
- **전체 보기**: 캔버스 전체를 축소하여 표시
- **뷰포트 표시**: 현재 보이는 영역을 하이라이트
- **클릭 이동**: 미니맵 클릭으로 해당 위치로 이동
- **표시/숨김**: 토글 버튼으로 미니맵 표시 제어

### 4. 콘텐츠 요소

#### 4.1 포스트잇 (Note)
- **생성**: 캔버스 클릭으로 포스트잇 추가
- **편집**: 더블클릭으로 텍스트 편집
- **색상 변경**: 다양한 색상 선택 가능
- **드래그**: 마우스로 자유롭게 이동
- **리사이즈**: 모서리 핸들로 크기 조절
- **삭제**: 선택 후 삭제 버튼 또는 Delete 키
- **깊이 조절**: 앞으로 가져오기/뒤로 보내기

#### 4.2 텍스트 요소 (Text)
- **생성**: 캔버스 클릭으로 텍스트 요소 추가
- **리치 텍스트 편집**: 더블클릭으로 편집 모드 진입
- **포맷팅**:
  - 굵게 (Ctrl+B)
  - 기울임 (Ctrl+I)
  - 밑줄
  - 취소선
  - 텍스트 색상
  - 하이라이트 색상
- **드래그**: 마우스로 자유롭게 이동
- **리사이즈**: 모서리 핸들로 크기 조절
- **삭제**: 선택 후 삭제 버튼 또는 Delete 키
- **깊이 조절**: 앞으로 가져오기/뒤로 보내기

#### 4.3 이미지 요소 (Image)
- **업로드**: 파일 선택 또는 드래그 앤 드롭으로 이미지 업로드
- **Supabase Storage**: 이미지는 Supabase Storage에 저장
- **드래그**: 마우스로 자유롭게 이동
- **리사이즈**: 모서리 핸들로 크기 조절 (비율 유지)
- **삭제**: 선택 후 삭제 버튼 또는 Delete 키
- **깊이 조절**: 앞으로 가져오기/뒤로 보내기
- **업로더 표시**: 마우스 오버 시 업로드한 사용자 이름 표시

### 5. 실시간 협업

#### 5.1 실시간 동기화
- **Supabase Realtime**: 모든 변경사항이 실시간으로 동기화
- **INSERT/UPDATE/DELETE**: 요소 생성, 수정, 삭제가 즉시 반영
- **위치 추적**: 요소 이동이 실시간으로 반영
- **최적화**: 자신의 변경사항은 optimistic update로 즉시 반영

#### 5.2 커서 추적
- **실시간 커서**: 다른 사용자의 마우스 커서 위치를 실시간으로 표시
- **사용자 색상**: 각 사용자마다 고유한 색상 할당
- **사용자 이름**: 커서 옆에 사용자 이름 표시

#### 5.3 협업 위젯
- **참여자 목록**: 현재 보드를 보고 있는 사용자 목록
- **드래그 가능**: 위젯을 원하는 위치로 이동 가능
- **미니모드/확장 모드**: 토글하여 크기 조절
- **위치 저장**: localStorage에 위치 저장하여 다음 방문 시 복원

### 6. UI/UX 기능

#### 6.1 다크모드
- **라이트/다크 전환**: 헤더의 테마 토글 버튼
- **시스템 설정 연동**: 시스템 테마에 따라 자동 설정
- **테마 저장**: 선택한 테마를 localStorage에 저장

#### 6.2 Blob Cursor
- **랜딩 페이지 전용**: 랜딩 페이지에서만 활성화
- **부드러운 애니메이션**: 마우스를 따라다니는 blob 형태의 커서
- **속도 기반 변형**: 마우스 속도에 따라 blob이 늘어남

#### 6.3 반응형 디자인
- **모바일 지원**: 기본적인 모바일 레이아웃 지원
- **터치 제스처**: 모바일에서도 드래그 및 줌 가능 (향후 개선)

## 기술 스택

### Frontend
- **Framework**: Next.js 16 (App Router)
- **Language**: TypeScript
- **Styling**: TailwindCSS v4
- **State Management**: Zustand
- **Architecture**: Feature-Sliced Design (FSD)

### Backend
- **BaaS**: Supabase
  - **Auth**: 사용자 인증 (Google OAuth, Email/Password)
  - **Database**: PostgreSQL (실시간 구독)
  - **Storage**: 이미지 파일 저장
  - **Realtime**: 실시간 동기화

### 개발 도구
- **Linting**: ESLint
- **Type Checking**: TypeScript (strict mode)
- **Code Quality**: 모든 `any` 타입 제거, `console.log` 제거

## 사용자 플로우

### 1. 신규 사용자 플로우

1. 랜딩 페이지 방문
2. "시작하기" 버튼 클릭
3. 로그인 페이지로 이동
4. Google OAuth 또는 이메일/비밀번호로 회원가입
5. 대시보드로 이동
6. "새 보드 만들기" 클릭
7. 보드 생성 및 편집 시작

### 2. 기존 사용자 플로우

1. 로그인
2. 대시보드에서 보드 선택
3. 보드 편집 시작
4. 포스트잇/텍스트/이미지 추가
5. 실시간으로 다른 사용자와 협업

### 3. 익명 사용자 플로우

1. 공개 보드 링크 접근
2. 보드 조회 (읽기 전용)
3. 편집 시도 시 로그인 모달 표시
4. 로그인 후 편집 가능

### 4. 보드 초대 플로우

1. 보드 소유자가 "초대" 버튼 클릭
2. 초대 링크 복사
3. 링크를 다른 사용자에게 공유
4. 다른 사용자가 링크로 접근
5. 자동으로 보드 참여

## 데이터 모델

### boards 테이블
- `id`: UUID (기본 키)
- `name`: TEXT (보드 이름)
- `description`: TEXT (보드 설명, nullable)
- `owner_id`: UUID (생성자 ID, auth.users 참조)
- `is_public`: BOOLEAN (공개/비공개)
- `invite_code`: TEXT (초대 코드, nullable)
- `created_at`: TIMESTAMPTZ
- `updated_at`: TIMESTAMPTZ

### board_elements 테이블
- `id`: UUID (기본 키)
- `board_id`: UUID (boards 참조)
- `user_id`: UUID (생성자 ID, auth.users 참조)
- `type`: TEXT ('note' | 'image' | 'text')
- `content`: TEXT (텍스트 내용 또는 이미지 URL)
- `position`: JSONB ({x: number, y: number})
- `size`: JSONB ({width: number, height: number})
- `color`: TEXT (포스트잇 색상, nullable)
- `text_style`: JSONB (텍스트 스타일, nullable)
- `z_index`: INTEGER (깊이 순서, nullable)
- `created_at`: TIMESTAMPTZ
- `updated_at`: TIMESTAMPTZ

### user_board_preferences 테이블
- `user_id`: UUID (auth.users 참조)
- `board_id`: UUID (boards 참조)
- `is_starred`: BOOLEAN (즐겨찾기)
- `is_pinned`: BOOLEAN (고정)
- `my_last_activity_at`: TIMESTAMPTZ (마지막 활동 시간)

## 보안 및 권한

### Row Level Security (RLS)

#### boards 테이블
- **SELECT**: 공개 보드는 모두 조회 가능, 비공개 보드는 소유자 및 참여자만 조회 가능
- **INSERT**: 인증된 사용자만 생성 가능
- **UPDATE**: 소유자만 수정 가능
- **DELETE**: 소유자만 삭제 가능

#### board_elements 테이블
- **SELECT**: 보드에 접근 가능한 사용자는 모든 요소 조회 가능
- **INSERT**: 보드에 접근 가능한 사용자는 요소 생성 가능
- **UPDATE**: 소유자 또는 요소 생성자만 수정 가능
- **DELETE**: 소유자 또는 요소 생성자만 삭제 가능

### Storage Policies
- **업로드**: 인증된 사용자만 업로드 가능
- **읽기**: 인증된 사용자만 읽기 가능 (signed URL 사용)
- **삭제**: 파일 업로더만 삭제 가능

## 성능 최적화

### 1. 코드 최적화
- **React.memo**: 요소 컴포넌트 메모이제이션
- **useCallback/useMemo**: 불필요한 리렌더링 방지
- **Logger**: 개발 환경에서만 로그 출력
- **타입 안정성**: 모든 `any` 타입 제거

### 2. 실시간 최적화
- **Optimistic Update**: 자신의 변경사항은 즉시 반영
- **이벤트 무시**: 자신이 생성한 이벤트는 Realtime에서 무시
- **드래그 최적화**: 드래그 중에는 DOM 직접 조작으로 리렌더링 최소화

### 3. 이미지 최적화
- **Supabase Storage**: CDN을 통한 이미지 제공
- **Signed URL**: Private 버킷에서도 안전하게 이미지 제공

## 접근성

### 1. 키보드 네비게이션
- **Delete 키**: 선택된 요소 삭제
- **Ctrl+B/I**: 텍스트 포맷팅
- **Enter**: 보드 이름/설명 저장

### 2. 스크린 리더 지원
- **aria-label**: 주요 버튼에 접근성 레이블 추가
- **alt 텍스트**: 이미지에 대체 텍스트 제공

### 3. 시각적 피드백
- **포커스 표시**: 키보드 포커스 시 명확한 표시
- **선택 표시**: 선택된 요소에 명확한 아웃라인

## 향후 개선 사항

### 단기 (우선순위 높음)
- [ ] 보드 검색 기능
- [ ] 요소 복사/붙여넣기
- [ ] 보드 템플릿
- [ ] 내보내기 기능 (이미지, PDF)

### 중기
- [ ] 보드 히스토리/버전 관리
- [ ] 댓글 기능
- [ ] 알림 시스템
- [ ] 모바일 앱

### 장기
- [ ] AI 기반 아이디어 제안
- [ ] 보드 공유 및 팀 관리
- [ ] API 제공
- [ ] 플러그인 시스템

## 제약사항

### 현재 제한사항
- **익명 사용자**: 공개 보드만 조회 가능, 편집 불가
- **이미지 크기**: 업로드 가능한 이미지 크기 제한 없음 (Supabase Storage 제한에 따름)
- **보드 개수**: 사용자당 생성 가능한 보드 개수 제한 없음
- **요소 개수**: 보드당 요소 개수 제한 없음

### 기술적 제약
- **Supabase 무료 플랜**: 일일 요청 수 제한
- **Storage 용량**: Supabase 무료 플랜의 Storage 용량 제한
- **Realtime 연결**: 동시 연결 수 제한

## 참고 자료

- [Next.js 문서](https://nextjs.org/docs)
- [Supabase 문서](https://supabase.com/docs)
- [Feature-Sliced Design](https://feature-sliced.design/)
- [Tailwind CSS v4](https://tailwindcss.com/docs)

---

**마지막 업데이트**: 2025년 12월

